{"remainingRequest":"D:\\tmp\\vuetest\\vue-ubike-information\\ubike-app\\node_modules\\babel-loader\\lib\\index.js!D:\\tmp\\vuetest\\vue-ubike-information\\ubike-app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\tmp\\vuetest\\vue-ubike-information\\ubike-app\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\tmp\\vuetest\\vue-ubike-information\\ubike-app\\src\\components\\Pagination.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\tmp\\vuetest\\vue-ubike-information\\ubike-app\\src\\components\\Pagination.vue","mtime":1598055047725},{"path":"D:\\tmp\\vuetest\\vue-ubike-information\\ubike-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1597545075644},{"path":"D:\\tmp\\vuetest\\vue-ubike-information\\ubike-app\\node_modules\\babel-loader\\lib\\index.js","mtime":1597545075581},{"path":"D:\\tmp\\vuetest\\vue-ubike-information\\ubike-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1597545075644},{"path":"D:\\tmp\\vuetest\\vue-ubike-information\\ubike-app\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1597545087688}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnBhcnNlLWludCI7CmltcG9ydCBidXMgZnJvbSAiLi4vYnVzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwYWdlQ291bnQ6IDEwLAogICAgICAvL+S4gOmggTEw562GCiAgICAgIHBhZ2VSYW5nZTogMTAsCiAgICAgIC8v5YiG6aCB5LiA5qyh6aGv56S65Y2B6aCBCiAgICAgIHBhZ2VSYW5nZUluZGV4OiAwLAogICAgICB0b3RhbFJlY29yZENvdW50OiAwCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRvdGFsUGFnZUNvdW50OiBmdW5jdGlvbiB0b3RhbFBhZ2VDb3VudCgpIHsKICAgICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLnRvdGFsUmVjb3JkQ291bnQgLyB0aGlzLnBhZ2VDb3VudCk7CiAgICB9LAogICAgbWF4UGFnZTogZnVuY3Rpb24gbWF4UGFnZSgpIHsKICAgICAgdmFyIG1vZCA9IHRoaXMudG90YWxQYWdlQ291bnQgJSB0aGlzLnBhZ2VSYW5nZTsKCiAgICAgIGlmICh0aGlzLnRvdGFsUmVjb3JkQ291bnQgPT09IDApIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfSBlbHNlIGlmICh0aGlzLnBhZ2VSYW5nZUluZGV4ID09PSBNYXRoLmNlaWwodGhpcy50b3RhbFBhZ2VDb3VudCAvIHRoaXMucGFnZUNvdW50KSAtIDEgJiYgbW9kICE9IDApIHsKICAgICAgICByZXR1cm4gbW9kOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5wYWdlUmFuZ2U7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGFuZ2VQYWdlOiBmdW5jdGlvbiBjaGFuZ2VQYWdlKHZhbCkgewogICAgICB2YXIgcyA9IHRoaXMucGFnZVJhbmdlSW5kZXggKiB0aGlzLnBhZ2VDb3VudCAqIHRoaXMucGFnZVJhbmdlICsgKHZhbCAtIDEpICogdGhpcy5wYWdlQ291bnQ7CiAgICAgIGJ1cy5lbWl0KCJqdW1wUGFnZSIsIHsKICAgICAgICBzdGFydEluZGV4OiBzLAogICAgICAgIGVuZEluZGV4OiBOdW1iZXIucGFyc2VJbnQocyArIHRoaXMucGFnZUNvdW50KQogICAgICB9KTsKICAgIH0sCiAgICBjaGFuZ2VSYW5nZTogZnVuY3Rpb24gY2hhbmdlUmFuZ2UodmFsKSB7CiAgICAgIGlmICh2YWwgPT09ICJhZGQiKSB0aGlzLnBhZ2VSYW5nZUluZGV4ID0gdGhpcy5wYWdlUmFuZ2VJbmRleCArIDE7ZWxzZSBpZiAodmFsID09PSAibGVzcyIpIHRoaXMucGFnZVJhbmdlSW5kZXggPSB0aGlzLnBhZ2VSYW5nZUluZGV4IC0gMTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICB0b3RhbFJlY29yZENvdW50OiBmdW5jdGlvbiB0b3RhbFJlY29yZENvdW50KCkgewogICAgICB0aGlzLnBhZ2VSYW5nZUluZGV4ID0gMDsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIGJ1cy5vbigidG90YWxEYXRhQ291bnQiLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgIF90aGlzLnRvdGFsUmVjb3JkQ291bnQgPSBtc2c7CiAgICB9KTsKICB9LAogIGJlZm9yZVVubW91bnQ6IGZ1bmN0aW9uIGJlZm9yZVVubW91bnQoKSB7CiAgICBidXMub2ZmKCJ0b3RhbERhdGFDb3VudCIpOwogIH0KfTs="},{"version":3,"sources":["D:\\tmp\\vuetest\\vue-ubike-information\\ubike-app\\src\\components\\Pagination.vue"],"names":[],"mappings":";;AAqBA,OAAO,GAAP,MAAgB,QAAhB;AACA,eAAe;AACb,EAAA,IADa,kBACN;AACL,WAAO;AACL,MAAA,SAAS,EAAE,EADN;AACU;AACf,MAAA,SAAS,EAAE,EAFN;AAEU;AACf,MAAA,cAAc,EAAE,CAHX;AAIL,MAAA,gBAAgB,EAAE;AAJb,KAAP;AAMD,GARY;AASb,EAAA,QAAQ,EAAE;AACR,IAAA,cADQ,4BACS;AACf,aAAO,IAAI,CAAC,IAAL,CAAU,KAAK,gBAAL,GAAwB,KAAK,SAAvC,CAAP;AACD,KAHO;AAIR,IAAA,OAJQ,qBAIE;AACR,UAAI,GAAE,GAAI,KAAK,cAAL,GAAsB,KAAK,SAArC;;AACA,UAAI,KAAK,gBAAL,KAA0B,CAA9B,EAAiC;AAC/B,eAAO,CAAP;AACF,OAFA,MAEO,IACL,KAAK,cAAL,KACE,IAAI,CAAC,IAAL,CAAU,KAAK,cAAL,GAAsB,KAAK,SAArC,IAAkD,CADpD,IAEA,GAAE,IAAK,CAHF,EAIL;AACA,eAAO,GAAP;AACF;;AACA,aAAO,KAAK,SAAZ;AACD;AAhBO,GATG;AA2Bb,EAAA,OAAO,EAAE;AACP,IAAA,UADO,sBACI,GADJ,EACS;AACd,UAAI,CAAA,GAAK,KAAK,cAAL,GAAsB,KAAK,SAA3B,GAAuC,KAAK,SAA7C,GAA0D,CAAC,GAAE,GAAI,CAAP,IAAY,KAAK,SAAnF;AACA,MAAA,GAAG,CAAC,IAAJ,CAAS,UAAT,EAAqB;AACnB,QAAA,UAAU,EAAE,CADO;AAEnB,QAAA,QAAQ,EAAE,MAAM,CAAC,QAAP,CAAgB,CAAA,GAAI,KAAK,SAAzB;AAFS,OAArB;AAID,KAPM;AAQP,IAAA,WARO,uBAQK,GARL,EAQU;AACf,UAAI,GAAE,KAAM,KAAZ,EAAmB,KAAK,cAAL,GAAsB,KAAK,cAAL,GAAsB,CAA5C,CAAnB,KACK,IAAI,GAAE,KAAM,MAAZ,EAAoB,KAAK,cAAL,GAAsB,KAAK,cAAL,GAAsB,CAA5C;AAC1B;AAXM,GA3BI;AAwCb,EAAA,KAAK,EAAE;AACL,IAAA,gBAAgB,EAAE,4BAAY;AAC5B,WAAK,cAAL,GAAsB,CAAtB;AACD;AAHI,GAxCM;AA6Cb,EAAA,OA7Ca,qBA6CH;AAAA;;AACR,IAAA,GAAG,CAAC,EAAJ,CAAO,gBAAP,EAAyB,UAAC,GAAD,EAAS;AAChC,MAAA,KAAI,CAAC,gBAAL,GAAwB,GAAxB;AACD,KAFD;AAGD,GAjDY;AAkDb,EAAA,aAlDa,2BAkDG;AACd,IAAA,GAAG,CAAC,GAAJ,CAAQ,gBAAR;AACD;AApDY,CAAf","sourcesContent":["<template>\r\n  <div>\r\n    <ul>\r\n      <li v-if=\"pageRangeIndex > 0\" @click=\"changeRange('less')\" class=\"pager\">\r\n        <a href=\"#\">&lt;</a>\r\n      </li>\r\n      <li class=\"pager\" v-for=\"n of maxPage\" :key=\"n\">\r\n        <!-- n 從 1 開始計算 -->\r\n        <a @click.prevent=\"changePage(n)\" href=\"#\">{{ (pageRangeIndex*pageRange)+ n }}</a>\r\n      </li>\r\n      <li\r\n        v-if=\"pageRangeIndex < (totalPageCount/pageCount-1)\"\r\n        @click=\"changeRange('add')\"\r\n        class=\"pager\"\r\n      >\r\n        <a href=\"#\">&gt;</a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n<script>\r\nimport bus from \"../bus\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      pageCount: 10, //一頁10筆\r\n      pageRange: 10, //分頁一次顯示十頁\r\n      pageRangeIndex: 0,\r\n      totalRecordCount: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    totalPageCount() {\r\n      return Math.ceil(this.totalRecordCount / this.pageCount);\r\n    },\r\n    maxPage() {\r\n      var mod = this.totalPageCount % this.pageRange;\r\n      if (this.totalRecordCount === 0) {\r\n        return 0;\r\n      } else if (\r\n        this.pageRangeIndex ===\r\n          Math.ceil(this.totalPageCount / this.pageCount) - 1 &&\r\n        mod != 0\r\n      ) {\r\n        return mod;\r\n      }\r\n      return this.pageRange;\r\n    },\r\n  },\r\n  methods: {\r\n    changePage(val) {\r\n      var s = (this.pageRangeIndex * this.pageCount * this.pageRange) + (val - 1) * this.pageCount;\r\n      bus.emit(\"jumpPage\", {\r\n        startIndex: s,\r\n        endIndex: Number.parseInt(s + this.pageCount),\r\n      });\r\n    },\r\n    changeRange(val) {\r\n      if (val === \"add\") this.pageRangeIndex = this.pageRangeIndex + 1;\r\n      else if (val === \"less\") this.pageRangeIndex = this.pageRangeIndex - 1;\r\n    },\r\n  },\r\n  watch: {\r\n    totalRecordCount: function () {\r\n      this.pageRangeIndex = 0;\r\n    },\r\n  },\r\n  created() {\r\n    bus.on(\"totalDataCount\", (msg) => {\r\n      this.totalRecordCount = msg;\r\n    });\r\n  },\r\n  beforeUnmount() {\r\n    bus.off(\"totalDataCount\");\r\n  },\r\n};\r\n</script>    \r\n<style scoped>\r\n.pager {\r\n  float: left;\r\n  display: block;\r\n  width: 20px;\r\n  height: 20px;\r\n  text-align: center;\r\n  line-height: 20px;\r\n  margin-right: 5px;\r\n  padding: 5px;\r\n  border: 1px solid #aaa;\r\n}\r\n\r\n.pager a {\r\n  text-decoration: none;\r\n}\r\n</style>"],"sourceRoot":""}]}